(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{239:function(t,e,n){var r=n(19),o="["+n(240)+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(l,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},240:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},241:function(t,e,n){var content=n(252);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(64).default)("58573fec",content,!0,{sourceMap:!1})},246:function(t,e,n){"use strict";var r=n(2),o=n(247),c=n(22),l=n(14),d=n(46),f=n(87);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=c(this),n=l(e.length),r=f(e,0);return r.length=o(r,e,e,n,0,void 0===t?1:d(t)),r}})},247:function(t,e,n){"use strict";var r=n(68),o=n(14),c=n(51),l=function(t,e,source,n,d,f,h,m){for(var element,y=d,v=0,_=!!h&&c(h,m,3);v<n;){if(v in source){if(element=_?_(source[v],v,e):source[v],f>0&&r(element))y=l(t,e,element,o(element.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[y]=element}y++}v++}return y};t.exports=l},248:function(t,e,n){"use strict";var r=n(10),o=n(4),c=n(86),l=n(16),d=n(12),f=n(45),h=n(176),m=n(66),y=n(6),v=n(69),_=n(67).f,k=n(32).f,x=n(15).f,w=n(239).trim,S="Number",O=o.Number,N=O.prototype,j=f(v(N))==S,E=function(t){var e,n,r,o,c,l,d,code,f=m(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=w(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(l=(c=f.slice(2)).length,d=0;d<l;d++)if((code=c.charCodeAt(d))<48||code>o)return NaN;return parseInt(c,r)}return+f};if(c(S,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var A,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(j?y((function(){N.valueOf.call(n)})):f(n)!=S)?h(new O(E(e)),n,I):E(e)},C=r?_(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),z=0;C.length>z;z++)d(O,A=C[z])&&!d(I,A)&&x(I,A,k(O,A));I.prototype=N,N.constructor=I,l(o,S,I)}},249:function(t,e,n){"use strict";var r=n(2),o=n(239).trim;r({target:"String",proto:!0,forced:n(250)("trim")},{trim:function(){return o(this)}})},250:function(t,e,n){var r=n(6),o=n(240);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}},251:function(t,e,n){"use strict";n(241)},252:function(t,e,n){var r=n(63)(!1);r.push([t.i,"main[data-v-ccc9f9c2]{margin:1em auto;display:table}main .info[data-v-ccc9f9c2]{display:flex;justify-content:space-between;align-items:center}main .info .progress[data-v-ccc9f9c2]{text-align:right}main .display[data-v-ccc9f9c2]{font-size:5rem;padding:2em 0;text-align:center}main .display.doing[data-v-ccc9f9c2]{text-align:left}main .display .typed[data-v-ccc9f9c2]{color:#aaa}main .keyboard[data-v-ccc9f9c2]>:nth-child(2){margin-left:2em}main .keyboard[data-v-ccc9f9c2]>:nth-child(3){margin-left:3em}main .keyboard[data-v-ccc9f9c2]>:nth-child(5){margin-left:14em}main .keyboard ul[data-v-ccc9f9c2]{display:flex;padding:0;list-style-type:none;position:relative}main .keyboard ul li[data-v-ccc9f9c2]{border:1px solid #ddd;width:4em;line-height:4em;min-height:4em;text-align:center;margin:.1rem}main .keyboard ul li.pressed[data-v-ccc9f9c2]{background-color:#faa;transform:translateY(.1rem)}main .keyboard ul li.key_Space[data-v-ccc9f9c2]{width:19.8em}main .keyboard ul li.key_ShiftLeft[data-v-ccc9f9c2]{width:5em}main .keyboard ul li.key_ShiftRight[data-v-ccc9f9c2]{width:7.2em}main .keyboard ul li.key_Enter[data-v-ccc9f9c2]{position:absolute;right:0;width:6.2em;height:8.5em;border-left:none;border-bottom:none}main .histories[data-v-ccc9f9c2]{max-height:30rem;overflow:auto}main .histories>ul[data-v-ccc9f9c2]{display:flex;flex-direction:column-reverse}main .histories .miss_words[data-v-ccc9f9c2]{display:flex;list-style-type:none;padding:0}main .histories .miss_word[data-v-ccc9f9c2]{padding:0 1rem;border-radius:.5em;background-color:#faa;color:red;margin:.1rem}main .alert[data-v-ccc9f9c2]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:9999;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}main .alert .popup[data-v-ccc9f9c2]{background-color:#fff;color:#333;border-radius:1em;padding:1em;position:relative;margin-bottom:5rem}main .alert .popup button[data-v-ccc9f9c2]{position:absolute;top:-2rem;right:-2rem;width:3rem;height:3rem}main .clickable[data-v-ccc9f9c2]{cursor:pointer}",""]),t.exports=r},255:function(t,e,n){"use strict";n.r(e);var r=n(147);var o=n(166),c=n(148);function l(t){return Object(r.a)(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Object(o.a)(t)||Object(c.a)()}var d=n(5),f=n(18),h=n(116),m=n(117),y=(n(40),n(43),n(41),n(36),n(65),n(174),n(53),n(54),n(175),n(246),n(50),n(177),n(248),n(8),n(20),n(24),n(249),n(37),n(23),n(28),n(38),n(39),n(1));function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var k=function(){function t(text){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;Object(h.a)(this,t),this.text=text,this.start=e,this.typed=n,this.end=r}return Object(m.a)(t,[{key:"duration",get:function(){return this.end.getTime()-this.start.getTime()}},{key:"miss_count",get:function(){return this.typed.length-this.text.length}},{key:"toJSON",value:function(){return{text:this.text,start:this.start,typed:this.typed,end:this.end}}}],[{key:"from",value:function(e){return new t(e.text,new Date(e.start),e.typed,new Date(e.end))}}]),t}(),x=function(){function t(e){Object(h.a)(this,t),this.records=e}return Object(m.a)(t,[{key:"miss_words",get:function(){return this.records.filter((function(i){return i.text!=i.typed})).map((function(i){return i.text}))}},{key:"toString",value:function(){this.records.length;var t=this.records.reduce((function(p,t){return p+t.duration}),0),e=Math.floor(t/1e3),n=("000"+t%1e3).slice(-3),r=this.records.reduce((function(p,t){return p+t.typed.length}),0),o=this.records.reduce((function(p,t){return p+t.text.length}),0),c=o/(t/1e3);return"[".concat(this.records[0].start.toLocaleString(),"] ").concat(this.records.length,"単語 ").concat(e,".").concat(n," 秒 タイプ数 ").concat(r," ミス数 ").concat(r-o," 速度 ").concat(Math.floor(c),".").concat(("00"+Math.floor(100*c)).slice(-2)," 文字/秒")}},{key:"toJSON",value:function(){return{records:this.records}}}],[{key:"from",value:function(e){return new t(e.records.map(k.from))}}]),t}(),w=function(){function t(label,code,e){Object(h.a)(this,t),this.label=label,this.code=code,this.clazz=e}return Object(m.a)(t,[{key:"toJSON",value:function(){return{label:this.label,code:this.code,clazz:this.clazz}}}]),t}(),S=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(h.a)(this,t),this.keymaps=n,this.pressed=r,this.keydown=function(t){t.preventDefault(),console.log(t),e.pressed.push(t.keyCode),e.handler&&e.handler(t.keyCode,t.key)},this.keyup=function(t){t.preventDefault();var n=e.pressed.indexOf(t.keyCode);n>=0&&e.pressed.splice(n,1)}}return Object(m.a)(t,[{key:"attach",value:function(t){t.addEventListener("keydown",this.keydown),t.addEventListener("keyup",this.keyup)}},{key:"detach",value:function(t){t.removeEventListener("keydown",this.keydown),t.removeEventListener("keyup",this.keyup)}},{key:"onpress",set:function(t){this.handler=t}},{key:"is_pressed",value:function(code){return this.pressed.includes(code)}},{key:"is_valid",value:function(code){return null!=this.keymaps.flat().find((function(i){return i.code==code}))}},{key:"load",value:function(text){this.keymaps=text.split(/\r?\n/).map((function(line){return line.split("\t").map((function(t){var e=t.split("|"),n=Object(f.a)(e,3),label=n[0],code=n[1],r=n[2];return new w(label,Number(code),r)}))}))}}]),t}(),O=function(){function t(e,n){Object(h.a)(this,t),this.subject=e,this.words=n}return Object(m.a)(t,[{key:"toJSON",value:function(){return{subject:this.subject,words:this.words}}}]),t}(),N=y.a.extend({data:function(){return{keyboard:new S,typed:"",text:"",indexes:[],records:[],doing:!1,histories:[],courses:[],course_index:0,alert:""}},fetch:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"text/plain"},responseType:"text"},e.t0=Promise,e.next=4,t.$axios.$get("/api/index",n);case 4:return e.t1=e.sent.split(/\r?\n/).map(function(){var e=Object(d.a)(regeneratorRuntime.mark((function e(line){var r,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=line.split("\t"),o=l(r),c=o[0],1!=(d=o.slice(1)).length){e.next=5;break}return e.next=4,t.$axios.$get(d[0],n);case 4:d=e.sent.split(/\r?\n/).filter((function(i){return i.trim().length>0}));case 5:return e.abrupt("return",new O(c,d));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,e.t0.all.call(e.t0,e.t1);case 7:return t.courses=e.sent,console.log(t.courses),e.t2=t.keyboard,e.next=12,t.$axios.$get("/api/keymaps",n);case 12:e.t3=e.sent,e.t2.load.call(e.t2,e.t3);case 14:case"end":return e.stop()}}),e)})))()},fetchOnServer:!1,created:function(){this.$nuxt.$emit("sidebar_disabled",!0)},mounted:function(){this.histories=localStorage.typing__histories&&JSON.parse(localStorage.typing__histories).map(x.from)||[],this.keyboard.attach(document),this.keyboard.onpress=this.onpress},beforeDestroy:function(){this.keyboard.detach(document)},computed:{will_typing:function(){return this.text.substr(this.typed.length)},record:function(){return this.records[this.records.length-1]},course:function(){return this.courses[this.course_index]}},watch:{histories:function(t){localStorage&&(localStorage.typing__histories=JSON.stringify(t))}},methods:{next:function(){this.typed="",this.record&&(this.record.end=new Date),this.indexes.length<=0?(this.doing=!1,this.course_index=(this.course_index+1)%this.courses.length,this.histories.push(new x(this.records)),this.records=[],this.text=""):(this.text=this.course.words[this.indexes.shift()],this.records.push(new k(this.text)))},setup:function(t){if(this.indexes=Array.from(Array(this.course.words.length)).map((function(t,i){return i})),t){var e,n=v(this.indexes);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=Math.floor(Math.random()*this.course.words.length),o=[this.indexes[i],this.indexes[r]];this.indexes[r]=o[0],this.indexes[i]=o[1]}}catch(t){n.e(t)}finally{n.f()}}},onpress:function(code,t){if(!this.doing&&32==code)return this.setup(!0),this.next(),void(this.doing=!0);if(this.keyboard.is_valid(code)){if(!this.doing)return;this.record.typed+=t,this.will_typing.charAt(0)==t&&(this.typed=this.typed+t),this.typed==this.text&&(this.record.text=this.text,this.next())}},review:function(t){this.doing&&(this.alert="終了してからです")},key_class:function(t){var e={pressed:this.keyboard.is_pressed(t.code)};return t.clazz&&(e["key_"+t.clazz]=!0),e}}}),j=(n(251),n(44)),component=Object(j.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{staticClass:"info"},[t.course?n("h1",{staticClass:"course"},[t._v("\n      Step "+t._s(t.courses.indexOf(t.course)+1)+" "+t._s(t.course.subject)+"("+t._s(t.course.words.length)+")\n    ")]):t._e(),t._v(" "),t.doing?n("div",{staticClass:"progress"},[t._v("あと "+t._s(t.indexes.length+1))]):t._e()]),t._v(" "),t.keyboard.keymaps.length>0?[n("div",{class:{display:!0,doing:t.doing}},[t.doing?[n("span",{staticClass:"typed"},[t._v(t._s(t.typed))]),n("span",{staticClass:"text"},[t._v(t._s(t.will_typing))])]:n("span",[t._v("スペースキーで開始します")])],2),t._v(" "),n("div",{staticClass:"keyboard"},t._l(t.keyboard.keymaps,(function(e,r){return n("ul",{key:r},t._l(e,(function(e,i){return n("li",{key:i,class:t.key_class(e)},[t._v("\n          "+t._s(e.label)+"\n        ")])})),0)})),0),t._v(" "),n("div",{staticClass:"histories"},[n("h3",[t._v("履歴（クリックすると間違い単語の練習ができます）")]),t._v(" "),n("span",{staticClass:"miss_word"},[t._v("ミスした単語")]),t._v(" "),n("ul",t._l(t.histories,(function(e,i){return n("li",{key:i,class:{clickable:e.miss_words.length>0},on:{click:function(n){e.miss_words.length>0&&t.review(e)}}},[t._v("\n          "+t._s(e)+"\n          "),n("ul",{staticClass:"miss_words"},t._l(e.miss_words,(function(e,r){return n("li",{key:r,staticClass:"miss_word"},[t._v("\n              "+t._s(e)+"\n            ")])})),0)])})),0)])]:t._e(),t._v(" "),t.alert.length>0?n("div",{staticClass:"alert"},[n("form",{staticClass:"popup",on:{submit:function(e){e.preventDefault(),t.alert=""}}},[n("p",[t._v(t._s(t.alert))]),t._v(" "),n("button",{attrs:{type:"submit"}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1)])]):t._e()],2)}),[],!1,null,"ccc9f9c2",null);e.default=component.exports}}]);