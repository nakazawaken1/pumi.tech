(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{235:function(t,e,n){var content=n(242);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(64).default)("73ce53f4",content,!0,{sourceMap:!1})},240:function(t,e,n){"use strict";var o=n(2),c=n(52).findIndex,r=n(88),d="findIndex",l=!0;d in[]&&Array(1).findIndex((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),r(d)},241:function(t,e,n){"use strict";n(235)},242:function(t,e,n){var o=n(63)(!1);o.push([t.i,".todos input[data-v-36b295c4],.todos li[data-v-36b295c4]{font-size:2rem}.todos li[data-v-36b295c4]{cursor:pointer;margin:1rem}.todos li.done[data-v-36b295c4]{text-decoration:line-through;color:grey}.histories ul[data-v-36b295c4]{display:flex;flex-direction:column-reverse}.histories ul li[data-v-36b295c4]{cursor:pointer}",""]),t.exports=o},253:function(t,e,n){"use strict";n.r(e);var o=n(116),c=n(117),r=(n(50),n(70),n(171),n(240),n(172),n(65),n(43),n(1)),d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.a)(this,t),this.subject=e,this.done=n}return Object(c.a)(t,[{key:"toJSON",value:function(){return{subject:this.subject,done:this.done}}}]),t}(),l=function(){function t(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).toISOString().substr(0,16).replace("T"," ").replace(/-/g,"/");Object(o.a)(this,t),this.type=e,this.subject=n,this.timestamp=c}return Object(c.a)(t,[{key:"execute",value:function(t){var e=this;switch(this.type){case"add":t.unshift(new d(this.subject));break;case"remove":t.splice(t.findIndex((function(i){return i.subject==e.subject})),1);break;case"done":t.find((function(i){return i.subject==e.subject})).done=!0;break;case"undone":t.find((function(i){return i.subject==e.subject})).done=!1}}},{key:"to_history",value:function(){switch(this.type){case"add":return"".concat(this.timestamp," ").concat(this.subject,"を追加しました");case"remove":return"".concat(this.timestamp," ").concat(this.subject,"を削除しました");case"done":return"".concat(this.timestamp," ").concat(this.subject,"を完了にしました");case"undone":return"".concat(this.timestamp," ").concat(this.subject,"を未完了に戻しました")}}},{key:"reverse",value:function(){switch(this.type){case"add":return new t("remove",this.subject);case"remove":return new t("add",this.subject);case"done":return new t("undone",this.subject);case"undone":return new t("done",this.subject)}}},{key:"toJSON",value:function(){return{type:this.type,subject:this.subject,timestamp:this.timestamp}}}],[{key:"from",value:function(e){return Object.assign(new t("add",""),e)}}]),t}(),m=r.a.extend({data:function(){return{todos:[],new_todo:"",commands:[]}},mounted:function(){this.todos=localStorage.todos&&JSON.parse(localStorage.todos)||[],this.commands=localStorage.commands&&JSON.parse(localStorage.commands).map(l.from)||[],this.$refs.input instanceof HTMLInputElement&&this.$refs.input.focus()},computed:{histories:function(){return this.commands.map((function(i){return i.to_history()}))}},methods:{add:function(){var t=this;this.new_todo.length>0&&!this.todos.some((function(i){return i.subject==t.new_todo}))&&(this.save_command("add",this.new_todo).execute(this.todos),this.new_todo="")},toggle:function(t){t.done=!t.done,this.save_command(t.done?"done":"undone",t.subject).execute(this.todos)},remove:function(t){this.save_command("remove",t.subject).execute(this.todos)},remove_commands:function(t){this.commands.splice(t)},save_command:function(t,e){var n=new l(t,e);return this.commands.push(n),n},undo:function(t){for(;this.commands.length>t;)this.commands.pop().reverse().execute(this.todos)}},watch:{todos:{handler:function(t){return localStorage&&(localStorage.todos=JSON.stringify(t))},deep:!0},commands:function(t){localStorage&&(localStorage.commands=JSON.stringify(t))}}}),h=(n(241),n(44)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("h1",[t._v("Todo")]),t._v(" "),n("form",{staticClass:"todos",on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_todo,expression:"new_todo"}],ref:"input",attrs:{type:"text",placeholder:"やることを入力"},domProps:{value:t.new_todo},on:{input:function(e){e.target.composing||(t.new_todo=e.target.value)}}}),t._v(" "),n("ol",t._l(t.todos,(function(e,i){return n("li",{key:i,class:{done:e.done},on:{click:function(n){return t.toggle(e)}}},[t._v("\n        "+t._s(e.subject)+"\n        "),n("button",{attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.remove(e)}}},[t._v("×")])])})),0)]),t._v(" "),n("aside",{staticClass:"histories"},[n("h3",[t._v("操作履歴")]),t._v(" "),n("ul",t._l(t.histories,(function(e,i){return n("li",{key:i,on:{click:function(e){return t.undo(i)}}},[t._v("\n        "+t._s(e)+"\n        "),n("button",{attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.remove_commands(i)}}},[t._v("\n          ×\n        ")])])})),0)])])}),[],!1,null,"36b295c4",null);e.default=component.exports}}]);